<html>
	<head>
		<meta charset="utf-8">
		<title>React phone number input</title>

		<script src="https://unpkg.com/react@16.0.0/umd/react.production.min.js"></script>
		<script src="https://unpkg.com/react-dom@16.0.0/umd/react-dom.production.min.js"></script>
		<script src="https://unpkg.com/babel-core@5.8.38/browser.min.js"></script>

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/default.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
		<script>hljs.initHighlightingOnLoad();</script>

		<!--
		This makes the page not scale down on mobile devices
		and instead adapt to the screen width using `@media` queries.
		-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>

		<script src="./react-phone-number-input.min.js"></script>
		<link rel="stylesheet" href="./rrui.css"/>
		<link rel="stylesheet" href="./style.css"/>
	</head>

	<style>
		html, body, button, input, textarea, select
		{
			font-family : Arial, Helvetica;
			font-size   : 20px;
		}

		body
		{
			padding: 40px;
		}

		h2
		{
			margin-top: 60px;
			margin-bottom: 30px;
		}

		.section
		{
			margin-top: 20px;
		}

		a
		{
			text-decoration: none;
			color: #0093C4;
		}

		a:hover
		{
			text-decoration: underline;
		}

		a.main
		{
			display   : block;
			font-size : 32px;
		}

		p
		{
			margin-top    : 10px;
			margin-bottom : 40px;
		}

		.react-phone-number-input
		{
			max-width : 20rem;
		}

		/* Overrides Chrome autofill yellow background color */
		.rrui__input-field:-webkit-autofill,
		.rrui__input-field:-webkit-autofill:hover,
		.rrui__input-field:-webkit-autofill:focus
		{
			box-shadow: 0 0 0 1000px white inset;
		}

		@media (max-width: 720px)
		{
			body
			{
				padding: calc(0.3rem * 2);
			}

			body, h2, a.main code
			{
				font-size: 18px;
			}

			h2
			{
				margin-top: 40px;
				margin-bottom: 12px;
			}

			code
			{
				font-size: 14px;
			}
		}
	</style>

	<body>
		<a target="_blank" class="main" href="https://github.com/catamphetamine/react-phone-number-input"><code>react-phone-number-input</code></a>

		<p>An international phone number <code>&lt;input/&gt;</code> for React</p>

		<div id="content"></div>

		<script type="text/babel">
			class Content extends React.Component
			{
				constructor()
				{
					super()

					this.state =
					{
						value_convert_to_national_false: '+78005553535',
						value_convert_to_national_true: '+78005553535'
					}
				}

				render()
				{
					const library = window['react-phone-number-input']

					const Phone = library.default

					// inputComponent={ props => <span><input {...props}/></span> }

					return (
						<div>
							<h2>Without default country</h2>

							<form>
								<Phone
									placeholder="Start typing a phone number"
									value={this.state.value}
									onChange={value => this.setState({ value: value })}
									autoFocus/>
							</form>

							<div className="section">
								Value: {this.state.value}
							</div>

							<pre className="hljs"><code>
								{`<Phone
  placeholder="Start typing a phone number"
  value={ this.state.value }
  onChange={ value => this.setState({ value }) }/>`}
							</code></pre>

							<h2>Default country: Russia</h2>

							<form>
								<Phone
									country="RU"
									placeholder="Ваш телефон"
									value={this.state.value_RU}
									onChange={value => this.setState({ value_RU: value })}/>
							</form>

							<div className="section">
								Value: {this.state.value_RU}
							</div>

							<pre className="hljs"><code>
{`import Phone from 'react-phone-number-input'

<Phone
  country="RU"
  placeholder="Ваш телефон"
  value={ this.state.value }
  onChange={ value => this.setState({ value }) }/>
`}
							</code></pre>

							<h2>convertToNational = false (default)</h2>

							<form>
								<Phone
									placeholder="Enter phone number"
									value={this.state.value_convert_to_national_false}
									onChange={value => this.setState({ value_convert_to_national_false: value })}/>
							</form>

							<div className="section">
								Value: {this.state.value_convert_to_national_false}
							</div>

							<pre className="hljs"><code>
{`<Phone
  placeholder="Enter phone number"
  value={ this.state.value }
  onChange={ value => this.setState({ value }) }/>
`}
							</code></pre>

							<h2>convertToNational = true</h2>

							<form>
								<Phone
									placeholder="Enter phone number"
									value={this.state.value_convert_to_national_true}
									onChange={value => this.setState({ value_convert_to_national_true: value })}
									convertToNational/>
							</form>

							<div className="section">
								Value: {this.state.value_convert_to_national_true}
							</div>

							<pre className="hljs"><code>
{`<Phone
  placeholder="Enter phone number"
  value={ this.state.value }
  onChange={ value => this.setState({ value }) }
  convertToNational/>
`}
							</code></pre>

							<h2>Validation</h2>

							<p>Note: I personally prefer not using this phone number validation feature in my projects. <a target="_blank" href="https://github.com/catamphetamine/libphonenumber-js#using-phone-number-validation-feature">Read the rationale</a>.</p>

							<form>
								<Phone
									error={this.state.value_validation && library.isValidPhoneNumber(this.state.value_validation) ? undefined : 'Invalid phone number'}
									indicateInvalid
									placeholder="Enter phone number"
									value={this.state.value_validation}
									onChange={value => this.setState({ value_validation: value })}/>
							</form>

							<div className="section">
								Value: {this.state.value_validation}
							</div>

							<div className="section">
								Is valid: {this.state.value_validation && library.isValidPhoneNumber(this.state.value_validation) ? 'true' : 'false'}
							</div>

							<div className="section">
								Local: {this.state.value_validation && library.parsePhoneNumber(this.state.value_validation).phone && library.formatPhoneNumber(library.parsePhoneNumber(this.state.value_validation), 'National')}
							</div>

							<div className="section">
								International: {this.state.value_validation && library.parsePhoneNumber(this.state.value_validation).phone &&library.formatPhoneNumber(library.parsePhoneNumber(this.state.value_validation), 'International')}
							</div>

							<pre className="hljs"><code>
{`import Phone, {
  formatPhoneNumber,
  parsePhoneNumber,
  isValidPhoneNumber
}
from 'react-phone-number-input'

const { value } = this.state

<Phone
  placeholder="Enter phone number"
  value={ value }
  onChange={ value => this.setState({ value }) }
  error={ value && isValidPhoneNumber(value) ? undefined : 'Invalid phone number' }
  indicateInvalid/>

Is valid: { value && isValidPhoneNumber(value) ? 'true' : 'false' }
Local: { value && parsePhoneNumber(value).phone && formatPhoneNumber( parsePhoneNumber(value), 'National' ) }
International: { value && parsePhoneNumber(value).phone && formatPhoneNumber( parsePhoneNumber(value), 'International' ) }
`}
							</code></pre>

							<h2>Native &lt;select/&gt;</h2>

							<form>
								<Phone
									placeholder="Enter phone number"
									value={this.state.value_native}
									onChange={value => this.setState({ value_native: value })}
									nativeExpanded/>
							</form>

							<pre className="hljs"><code>
{`<Phone
  placeholder="Enter phone number"
  value={ this.state.value }
  onChange={ value => this.setState({ value }) }
  nativeExpanded/>
`}
							</code></pre>
						</div>
					)
				}
			}

			ReactDOM.render
			(
				<Content />,
				document.getElementById('content')
			)
		</script>
	</body>
</html>