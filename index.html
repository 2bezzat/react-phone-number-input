<html>
	<head>
		<meta charset="utf-8">
		<title>React phone number input</title>

		<!-- React 15.3.1 -->
		<script src="./lib/react.js"></script>
		<script src="./lib/react-dom.js"></script>
		<!-- Babel 5.8 -->
		<script src="./lib/babel.js"></script>

		<!-- PrismJS -->
		<link href="./lib/prism.css" rel="stylesheet" />
		<script src="./lib/prism.js"></script>

		<!--
		This makes the page not scale down on mobile devices
		and instead adapt to the screen width using `@media` queries.
		-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>

		<script src="./react-phone-number-input.min.js"></script>
		<script src="./libphonenumber-js.min.js"></script>

		<link rel="stylesheet" href="./rrui.css"/>
		<link rel="stylesheet" href="./style.css"/>
	</head>

	<style>
		html, body, button, input, textarea, select
		{
			font-family : Arial, Helvetica;
			font-size   : 20px;
		}

		body
		{
			padding: 40px;
		}

		h2
		{
			margin-top: 60px;
			margin-bottom: 30px;
		}

		pre
		{
			border: 1px solid rgba(0, 0, 0, 0.03);
		}

		.section
		{
			margin-top: 20px;
		}

		a
		{
			text-decoration: none;
			color: #0093C4;
		}

		a:hover
		{
			text-decoration: underline;
		}

		a.main
		{
			display   : block;
			font-size : 32px;
		}

		p
		{
			margin-top    : 10px;
			margin-bottom : 40px;
		}

		.react-phone-number-input
		{
			max-width : 17rem;
		}

		/* Overrides Chrome autofill yellow background color */
		.rrui__input-field:-webkit-autofill,
		.rrui__input-field:-webkit-autofill:hover,
		.rrui__input-field:-webkit-autofill:focus
		{
			box-shadow: 0 0 0 1000px white inset;
		}

		@media (max-width: 720px)
		{
			body
			{
				padding: calc(0.3rem * 2);
			}

			body, h2, a.main code
			{
				font-size: 18px;
			}

			h2
			{
				margin-top: 40px;
				margin-bottom: 12px;
			}

			code
			{
				font-size: 14px;
			}
		}
	</style>

	<script>
		var ru =
		{
			"ext": "доб.",

			"AB": "Абхазия",
			"AD": "Андорра",
			"AE": "Объединенные Арабские Эмираты",
			"AF": "Афганистан",
			"AG": "Антигуа и Барбуда",
			"AI": "Ангилья",
			"AL": "Албания",
			"AM": "Армения",
			"AO": "Ангола",
			"AQ": "Антарктида",
			"AR": "Аргентина",
			"AS": "Американское Самоа",
			"AT": "Австрия",
			"AU": "Австралия",
			"AW": "Аруба",
			"AX": "Эландские острова",
			"AZ": "Азербайджан",
			"BA": "Босния и Герцеговина",
			"BB": "Барбадос",
			"BD": "Бангладеш",
			"BE": "Бельгия",
			"BF": "Буркина-Фасо",
			"BG": "Болгария",
			"BH": "Бахрейн",
			"BI": "Бурунди",
			"BJ": "Бенин",
			"BL": "Сен-Бартельми",
			"BM": "Бермуды",
			"BN": "Бруней-Даруссалам",
			"BO": "Боливия, Многонациональное Государство",
			"BQ": "Бонайре, Саба и Синт-Эстатиус",
			"BR": "Бразилия",
			"BS": "Багамы",
			"BT": "Бутан",
			"BV": "Остров Буве",
			"BW": "Ботсвана",
			"BY": "Беларусь",
			"BZ": "Белиз",
			"CA": "Канада",
			"CC": "Кокосовые (Килинг) острова",
			"CD": "Конго, Демократическая Республика",
			"CF": "Центрально-Африканская Республика",
			"CG": "Конго",
			"CH": "Швейцария",
			"CI": "Кот д'Ивуар",
			"CK": "Острова Кука",
			"CL": "Чили",
			"CM": "Камерун",
			"CN": "Китай",
			"CO": "Колумбия",
			"CR": "Коста-Рика",
			"CU": "Куба",
			"CV": "Кабо-Верде",
			"CW": "Кюрасао",
			"CX": "Остров Рождества",
			"CY": "Кипр",
			"CZ": "Чешская Республика",
			"DE": "Германия",
			"DJ": "Джибути",
			"DK": "Дания",
			"DM": "Доминика",
			"DO": "Доминиканская Республика",
			"DZ": "Алжир",
			"EC": "Эквадор",
			"EE": "Эстония",
			"EG": "Египет",
			"EH": "Западная Сахара",
			"ER": "Эритрея",
			"ES": "Испания",
			"ET": "Эфиопия",
			"FI": "Финляндия",
			"FJ": "Фиджи",
			"FK": "Фолклендские острова (Мальвинские)",
			"FM": "Микронезия, Федеративные Штаты",
			"FO": "Фарерские острова",
			"FR": "Франция",
			"GA": "Габон",
			"GB": "Соединенное Королевство",
			"GD": "Гренада",
			"GE": "Грузия",
			"GF": "Французская Гвиана",
			"GG": "Гернси",
			"GH": "Гана",
			"GI": "Гибралтар",
			"GL": "Гренландия",
			"GM": "Гамбия",
			"GN": "Гвинея",
			"GP": "Гваделупа",
			"GQ": "Экваториальная Гвинея",
			"GR": "Греция",
			"GS": "Южная Джорджия и Южные Сандвичевы острова",
			"GT": "Гватемала",
			"GU": "Гуам",
			"GW": "Гвинея-Бисау",
			"GY": "Гайана",
			"HK": "Гонконг",
			"HM": "Остров Херд и острова Макдональд",
			"HN": "Гондурас",
			"HR": "Хорватия",
			"HT": "Гаити",
			"HU": "Венгрия",
			"ID": "Индонезия",
			"IE": "Ирландия",
			"IL": "Израиль",
			"IM": "Остров Мэн",
			"IN": "Индия",
			"IO": "Британская территория в Индийском океане",
			"IQ": "Ирак",
			"IR": "Иран, Исламская Республика",
			"IS": "Исландия",
			"IT": "Италия",
			"JE": "Джерси",
			"JM": "Ямайка",
			"JO": "Иордания",
			"JP": "Япония",
			"KE": "Кения",
			"KG": "Киргизия",
			"KH": "Камбоджа",
			"KI": "Кирибати",
			"KM": "Коморы",
			"KN": "Сент-Китс и Невис",
			"KP": "Корея, Народно-Демократическая Республика",
			"KR": "Корея, Республика",
			"KW": "Кувейт",
			"KY": "Острова Кайман",
			"KZ": "Казахстан",
			"LA": "Лаос",
			"LB": "Ливан",
			"LC": "Сент-Люсия",
			"LI": "Лихтенштейн",
			"LK": "Шри-Ланка",
			"LR": "Либерия",
			"LS": "Лесото",
			"LT": "Литва",
			"LU": "Люксембург",
			"LV": "Латвия",
			"LY": "Ливийская Арабская Джамахирия",
			"MA": "Марокко",
			"MC": "Монако",
			"MD": "Молдова, Республика",
			"ME": "Черногория",
			"MF": "Сен-Мартен",
			"MG": "Мадагаскар",
			"MH": "Маршалловы острова",
			"MK": "Республика Македония",
			"ML": "Мали",
			"MM": "Мьянма",
			"MN": "Монголия",
			"MO": "Макао",
			"MP": "Северные Марианские острова",
			"MQ": "Мартиника",
			"MR": "Мавритания",
			"MS": "Монтсеррат",
			"MT": "Мальта",
			"MU": "Маврикий",
			"MV": "Мальдивы",
			"MW": "Малави",
			"MX": "Мексика",
			"MY": "Малайзия",
			"MZ": "Мозамбик",
			"NA": "Намибия",
			"NC": "Новая Каледония",
			"NE": "Нигер",
			"NF": "Остров Норфолк",
			"NG": "Нигерия",
			"NI": "Никарагуа",
			"NL": "Нидерланды",
			"NO": "Норвегия",
			"NP": "Непал",
			"NR": "Науру",
			"NU": "Ниуэ",
			"NZ": "Новая Зеландия",
			"OM": "Оман",
			"OS": "Южная Осетия",
			"PA": "Панама",
			"PE": "Перу",
			"PF": "Французская Полинезия",
			"PG": "Папуа-Новая Гвинея",
			"PH": "Филиппины",
			"PK": "Пакистан",
			"PL": "Польша",
			"PM": "Сент-Пьер и Микелон",
			"PN": "Питкерн",
			"PR": "Пуэрто-Рико",
			"PS": "Палестинская территория, оккупированная",
			"PT": "Португалия",
			"PW": "Палау",
			"PY": "Парагвай",
			"QA": "Катар",
			"RE": "Реюньон",
			"RO": "Румыния",
			"RS": "Сербия",
			"RU": "Россия",
			"RW": "Руанда",
			"SA": "Саудовская Аравия",
			"SB": "Соломоновы острова",
			"SC": "Сейшелы",
			"SD": "Судан",
			"SE": "Швеция",
			"SG": "Сингапур",
			"SH": "Святая Елена, Остров вознесения, Тристан-да-Кунья",
			"SI": "Словения",
			"SJ": "Шпицберген и Ян Майен",
			"SK": "Словакия",
			"SL": "Сьерра-Леоне",
			"SM": "Сан-Марино",
			"SN": "Сенегал",
			"SO": "Сомали",
			"SR": "Суринам",
			"SS": "Южный Судан",
			"ST": "Сан-Томе и Принсипи",
			"SV": "Эль-Сальвадор",
			"SX": "Синт-Мартен",
			"SY": "Сирийская Арабская Республика",
			"SZ": "Свазиленд",
			"TC": "Острова Теркс и Кайкос",
			"TD": "Чад",
			"TF": "Французские Южные территории",
			"TG": "Того",
			"TH": "Таиланд",
			"TJ": "Таджикистан",
			"TK": "Токелау",
			"TL": "Тимор-Лесте",
			"TM": "Туркмения",
			"TN": "Тунис",
			"TO": "Тонга",
			"TR": "Турция",
			"TT": "Тринидад и Тобаго",
			"TV": "Тувалу",
			"TW": "Тайвань (Китай)",
			"TZ": "Танзания, Объединенная Республика",
			"UA": "Украина",
			"UG": "Уганда",
			"UM": "Малые Тихоокеанские отдаленные острова Соединенных Штатов",
			"US": "Соединенные Штаты",
			"UY": "Уругвай",
			"UZ": "Узбекистан",
			"VA": "Папский Престол (Государство &mdash; город Ватикан)",
			"VC": "Сент-Винсент и Гренадины",
			"VE": "Венесуэла Боливарианская Республика",
			"VG": "Виргинские острова, Британские",
			"VI": "Виргинские острова, США",
			"VN": "Вьетнам",
			"VU": "Вануату",
			"WF": "Уоллис и Футуна",
			"WS": "Самоа",
			"YE": "Йемен",
			"YT": "Майотта",
			"ZA": "Южная Африка",
			"ZM": "Замбия",
			"ZW": "Зимбабве",
			"ZZ": "Международный"
		}
	</script>

	<body>
		<a target="_blank" class="main" href="https://github.com/catamphetamine/react-phone-number-input"><code>react-phone-number-input</code></a>

		<p>An international phone number <code>&lt;input/&gt;</code> for React</p>

		<div id="content"></div>

		<script type="text/babel">
			const debug = window.location.origin === 'file://'

			const library = window['react-phone-number-input']

			const Phone = library.default

			function Highlight({ lang, style, children })
			{
				return (
					<pre style={style || { marginTop: '20px' }} className={`language-${lang}`}>
						<code dangerouslySetInnerHTML={{__html: Prism.highlight(children.trim(), Prism.languages[lang], lang)}}/>
					</pre>
				)
			}

			class Content extends React.Component
			{
				constructor()
				{
					super()

					this.state =
					{
						value_convert_to_national_false: '+78005553535',
						value_convert_to_national_true: '+78005553535'
					}
				}

				render()
				{
					return (
						<div>
							<h2>Example</h2>

							<form>
								<Phone
									placeholder="Start typing a phone number"
									value={this.state.value}
									onChange={value => this.setState({ value: value })}
									autoFocus/>
							</form>

							<div className="section">
								Value: {this.state.value}
							</div>

							<Highlight lang="jsx">
								{`<Phone
  placeholder="Start typing a phone number"
  value={ this.state.value }
  onChange={ value => this.setState({ value }) }/>`}
							</Highlight>

							<h2><code>smartCaret = false</code></h2>

							<div className="section">
								There have been <a target="_blank" href="https://github.com/catamphetamine/react-phone-number-input/issues/75">reports</a> of some Samsung Android phones not handling caret positioning properly (e.g. Samsung Galaxy S8+, Samsung Galaxy S7 Edge).
							</div>

							<div className="section">
								The workaround is to pass <code>{'smartCaret={false}'}</code> property.
							</div>

							<div className="section">
								&nbsp;
							</div>

							<form>
								<Phone
									smartCaret={false}
									placeholder="Start typing a phone number"
									value={this.state.value}
									onChange={value => this.setState({ value: value })}
									autoFocus/>
							</form>

							<div className="section">
								Value: {this.state.value}
							</div>

							<Highlight lang="jsx">
								{`<Phone
  smartCaret={ false }
  placeholder="Start typing a phone number"
  value={ this.state.value }
  onChange={ value => this.setState({ value }) }/>`}
							</Highlight>

							<div className="section">
								<code>{'smartCaret={false}'}</code> caret is not as "smart" as the default one but still works good enough (and has no issues on Samsung Android phones). When erasing or inserting digits in the middle of a phone number this caret jumps to the end: this is the expected behaviour because the "smart" caret positioning has been turned off specifically to fix this Samsung Android phones issue.
							</div>

							<h2>Default country: Russia</h2>

							<form>
								<Phone
									country="RU"
									placeholder="Start typing a phone number"
									value={this.state.value_RU}
									onChange={value => this.setState({ value_RU: value })}/>
							</form>

							<div className="section">
								Value: {this.state.value_RU}
							</div>

							<Highlight lang="jsx">
{`import Phone from 'react-phone-number-input'

<Phone
  country="RU"
  placeholder="Start typing a phone number"
  value={ this.state.value }
  onChange={ value => this.setState({ value }) }/>
`}
							</Highlight>

							<h2>displayInitialValueAsLocalNumber = false (default)</h2>

							<form>
								<Phone
									placeholder="Enter phone number"
									value={this.state.value_convert_to_national_false}
									onChange={value => this.setState({ value_convert_to_national_false: value })}/>
							</form>

							<div className="section">
								Value: {this.state.value_convert_to_national_false}
							</div>

							<Highlight lang="jsx">
{`<Phone
  value={ this.state.value }
  onChange={ value => this.setState({ value }) }/>
`}
							</Highlight>

							<h2>displayInitialValueAsLocalNumber = true</h2>

							<form>
								<Phone
									placeholder="Enter phone number"
									value={this.state.value_convert_to_national_true}
									onChange={value => this.setState({ value_convert_to_national_true: value })}
									displayInitialValueAsLocalNumber/>
							</form>

							<div className="section">
								Value: {this.state.value_convert_to_national_true}
							</div>

							<Highlight lang="jsx">
{`<Phone
  displayInitialValueAsLocalNumber
  value={ this.state.value }
  onChange={ value => this.setState({ value }) }/>
`}
							</Highlight>

							<h2>Internationalization</h2>

							<div className="section" style={{ lineHeight: '34px' }}>
								Country names can be passed via the <code>labels</code> property.
								<br/>
								E.g. <code>labels={'{{'} RU: "Россия", US: "США", ... {'}}'}</code>.
								<br/>
								This component comes pre-packaged with a couple of ready-made <a target="_blank" href="https://github.com/catamphetamine/react-phone-number-input/tree/master/locale">translations</a>. Submit pull requests for adding new translations.
								<br/>
								<br/>
							</div>

							<form>
								<Phone
									placeholder="Ваш телефон"
									value={this.state.value}
									onChange={value => this.setState({ value })}
									labels={ru}/>
							</form>

							<Highlight lang="jsx">
{`// Country names in Russian.
import ru from 'react-phone-number-input/locale/ru'

<Phone
  labels={ ru }
  placeholder="Ваш телефон"
  value={ this.state.value }
  onChange={ value => this.setState({ value }) }/>
`}
							</Highlight>

							<h2>Validation</h2>

							<p>Note: I personally prefer not using this phone number validation feature in my projects. <a target="_blank" href="https://github.com/catamphetamine/libphonenumber-js#using-phone-number-validation-feature">Read the rationale</a>.</p>

							<form>
								<Phone
									error={this.state.value_validation ? (libphonenumber.isValidNumber(this.state.value_validation) ? undefined : 'Invalid phone number') : 'Phone number required'}
									indicateInvalid
									placeholder="Enter phone number"
									value={this.state.value_validation}
									onChange={value => this.setState({ value_validation: value })}/>
							</form>

							<div className="section">
								Value: {this.state.value_validation}
							</div>

							<div className="section">
								Is valid: {this.state.value_validation && libphonenumber.isValidNumber(this.state.value_validation) ? 'true' : 'false'}
							</div>

							<div className="section">
								Local: {this.state.value_validation && libphonenumber.formatNumber(this.state.value_validation, 'National')}
							</div>

							<div className="section">
								International: {this.state.value_validation && libphonenumber.formatNumber(this.state.value_validation, 'International')}
							</div>

							<Highlight lang="jsx">
{`import Phone from 'react-phone-number-input'
import { parseNumber, formatNumber, isValidNumber } from 'libphonenumber-js'

const { value } = this.state

<Phone
  placeholder="Enter phone number"
  value={ value }
  onChange={ value => this.setState({ value }) }
  error={ value ? (isValidNumber(value) ? undefined : 'Invalid phone number') : 'Phone number required' }
  indicateInvalid/>

Is valid: { value && isValidNumber(value) ? 'true' : 'false' }
Local: { value && formatNumber(value, 'National') }
International: { value && formatNumber(value, 'International') }
`}
							</Highlight>

							<h2>Extension</h2>

							<form>
								<Phone
									ext={<input
										value={ this.state.ext }
										onChange={ event => this.setState({ ext: event.target.value }) }/>
									}
									value={this.state.value}
									onChange={value => this.setState({ value })}/>
							</form>

							<div className="section">
								Value: {this.state.value}
							</div>

							<div className="section">
								Ext: {this.state.ext}
							</div>

							<Highlight lang="jsx">
{`const ext = (
  <input
    value={ this.state.ext }
    onChange={ event => this.setState({ ext: event.target.value }) }/>
)

<Phone
  ext={ ext }
  value={ this.state.value }
  onChange={ value => this.setState({ value }) }/>
`}
							</Highlight>

							<h2>Native country &lt;select/&gt;</h2>

							<form>
								<Phone
									placeholder="Enter phone number"
									value={this.state.value_native}
									onChange={value => this.setState({ value_native: value })}
									nativeCountrySelect/>
							</form>

							<Highlight lang="jsx">
{`<Phone
  placeholder="Enter phone number"
  value={ this.state.value }
  onChange={ value => this.setState({ value }) }
  nativeCountrySelect/>
`}
							</Highlight>

							{ debug && this.render_debug() }
						</div>
					)
				}

				render_debug() {
					return (
						<div>
							{/*
							<h2>All flags</h2>

							<Phone
								value={this.state.value}
								onChange={value => this.setState({ value })}
								flags={library.flags}/>
							*/}

							<h2>Dynamic</h2>

							<Phone
								labels={this.state.dynamic_labels}
								country={this.state.dynamic_country}
								value={this.state.dynamic_value}
								onChange={value => this.setState({ dynamic_value: value })}/>

							<div className="section">
								<br/>
								displayInitialValueAsLocalNumber:
								<br/>
								<br/>
							</div>

							<Phone
								labels={this.state.dynamic_labels}
								country={this.state.dynamic_country}
								value={this.state.dynamic_value}
								onChange={value => this.setState({ dynamic_value: value })}
								displayInitialValueAsLocalNumber/>

							<div className="section">
								<br/>

								<button
									type="button"
									onClick={() => this.setState({ dynamic_labels: ru })}>
									Set labels to RU
								</button>
							</div>

							<div className="section">
								<button
									type="button"
									onClick={() => this.setState({ dynamic_country: 'FR' })}>
									Set country to 'FR'
								</button>
							</div>

							<div className="section">
								<button
									type="button"
									onClick={() => this.setState({ dynamic_value: '+78005553535' })}>
									Set value to '+78005553535'
								</button>
							</div>

						</div>
					)
				}
			}

			ReactDOM.render
			(
				<Content />,
				document.getElementById('content')
			)
		</script>
	</body>
</html>
